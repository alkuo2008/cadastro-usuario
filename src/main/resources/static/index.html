<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Cadastro de Pets</title>
    <link rel="stylesheet" href="style.css" />
</head>
<body>
<div class="container">
    <h1>üêæ Cadastro de Pets</h1>

    <!-- Cadastrar Pet -->
    <div class="card">
        <h2>Adicionar Pet</h2>
        <input id="nome" type="text" placeholder="Nome do pet" />
        <input id="especie" type="text" placeholder="Esp√©cie (ex: cachorro, gato...)" />
        <input id="raca" type="text" placeholder="Ra√ßa" />
        <input id="idade" type="number" placeholder="Idade (em anos)" />
        <input id="tutor" type="text" placeholder="Nome do tutor" />
        <button onclick="cadastrarPet()">Cadastrar</button>
    </div>

    <!-- Buscar Pet -->
    <div class="card">
        <h2>Buscar Pet</h2>
        <input id="busca" type="text" placeholder="Digite o nome do pet" />
        <button onclick="buscarPet()">Buscar</button>
        <pre id="resultadoBusca"></pre>
    </div>

    <!-- Deletar Pet -->
    <div class="card danger">
        <h2>Remover Pet</h2>
        <input id="idDeletar" type="number" placeholder="ID do pet a remover" />
        <button class="delete-btn" onclick="deletarPet()">Remover</button>
    </div>

    <!-- Atualizar Pet -->
    <div class="card">
        <h2>Atualizar Pet</h2>
        <input id="idAtualizar" type="number" placeholder="ID do pet" />
        <input id="nomeAtualizar" type="text" placeholder="Novo nome do pet" />
        <input id="especieAtualizar" type="text" placeholder="Nova esp√©cie" />
        <input id="racaAtualizar" type="text" placeholder="Nova ra√ßa" />
        <input id="idadeAtualizar" type="number" placeholder="Nova idade" />
        <input id="tutorAtualizar" type="text" placeholder="Novo tutor" />
        <button onclick="atualizarPet()">Atualizar</button>
    </div>
</div>

<script>
    async function cadastrarPet() {
      const nome = document.getElementById("nome").value;
      const especie = document.getElementById("especie").value;
      const raca = document.getElementById("raca").value;
      const idade = document.getElementById("idade").value;
      const tutor = document.getElementById("tutor").value;

      const resposta = await fetch("/pets", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ nome, especie, raca, idade, tutor })
      });

      alert(resposta.ok ? "Pet cadastrado com sucesso!" : "Erro ao cadastrar pet.");
    }

    async function buscarPet() {
      const nome = document.getElementById("busca").value;
      const resposta = await fetch(`/pets/${nome}`);
      const dados = await resposta.json();
      document.getElementById("resultadoBusca").textContent = JSON.stringify(dados, null, 2);
    }

    async function deletarPet() {
      const id = document.getElementById("idDeletar").value;
      const resposta = await fetch(`/pets/${id}`, { method: "DELETE" });
      alert(resposta.ok ? "Pet removido com sucesso!" : "Erro ao remover pet.");
    }

    async function atualizarPet() {
      const id = document.getElementById("idAtualizar").value;
      const nome = document.getElementById("nomeAtualizar").value;
      const especie = document.getElementById("especieAtualizar").value;
      const raca = document.getElementById("racaAtualizar").value;
      const idade = document.getElementById("idadeAtualizar").value;
      const tutor = document.getElementById("tutorAtualizar").value;

      const resposta = await fetch(`/pets/${id}`, {
        method: "PUT",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ nome, especie, raca, idade, tutor })
      });

      if (resposta.ok) {
        alert("Pet atualizado com sucesso!");
      } else {
        alert("Erro ao atualizar pet!");
      }
    }
</script>
</body>
</html>
